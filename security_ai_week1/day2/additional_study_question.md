# ❓ 질문 중심 정리 — Aho-Corasick & 문자열 탐색 (2025-05-22)

---

## 🔎 Q1. Aho-Corasick은 어떻게 작동하는가?
- 트라이(Trie) 구조에 모든 키워드를 저장하고, 텍스트를 한 글자씩 읽어가며 탐색.
- 분기 가능하면 따라가고, 실패하면 **Failure Link(실패 링크)**를 따라 점프.
- 텍스트 한 글자당 **한 번의 이동 또는 점프만** 하므로 전체 시간은 O(M)으로 매우 빠름.

---

## 🔎 Q2. herx라는 문자열이 들어왔을 때 'hers' 키워드는 어떻게 처리되는가?
- `"h"` → `"e"` → `"r"` 까지 일치
- `"x"`가 들어오면 `"s"`가 아니라서 실패
- 이때 **실패 링크를 통해 'her'의 접미사 중 트리에 있는 노드로 점프**
- 해당 접미사가 없으면 루트로 돌아감

---

## 🔎 Q3. 결국 트라이를 따라 문자 하나씩 대입하며 찾는 건가?
- ✅ 맞음. `"h"` → `"e"` → `"r"` → `"s"` 이런 식으로 **차례차례 대입하며** 탐색
- 실패할 경우 미리 계산된 실패 링크를 따라 점프
- 이 방식이 중복 계산 없이 효율적인 이유

---

## 🔎 Q4. Aho-Corasick의 시간복잡도는 문자의 빈도에 영향을 받는가?
- ❌ 아니요! `"h"`가 수천만 번 등장해도 상관없음
- 각 문자는 **정확히 한 번만 처리**되며, 실패 링크를 따라 상수 시간 이내로 점프 가능
- 따라서 시간복잡도는 **무조건 O(텍스트 길이, M)**

---

## 🔎 Q5. 그럼 웹브라우저의 Ctrl+F 같은 검색 기능과 뭐가 다른가?
- Ctrl+F는 슬라이딩 윈도우 방식 → 패턴 전체를 계속 새로 비교
- Aho는 트라이로 접두사들을 공유 → 훨씬 빠름
- 실패 링크 덕분에 **이전 탐색을 재사용**할 수 있음

---

## 🔎 Q6. Aho-Corasick보다 더 빠른 탐색 방법은 없는가?
- ✅ 단일 키워드일 땐 KMP, Boyer-Moore가 더 간단하고 빠를 수 있음
- ✅ 반복 검색에서는 Suffix Array, FM-index 같은 인덱싱 구조가 더 적합
- ✅ 병렬 처리가 가능한 환경이라면 GPU 기반 병렬화가 성능 우위
- ❗ 하지만 **"다중 패턴 검색"에선 Aho-Corasick이 거의 최적**

---

## 🔎 Q7. 실습 텍스트에서 탐색 흐름은 어떻게 되는가?
- 텍스트: `"hhesadwaherhehersersher"`
- 키워드: `"hers"`
- 탐색 흐름:
  - `"h"` → `"e"` → `"r"` → `"s"` 성공 (인덱스 12~15)
  - 그 외에는 실패 링크를 통해 루트로 점프하면서 재탐색 수행
- 탐색 결과: **"hers" 1회 탐지 (12~15)**

---

## ✅ 결론 요약
- 텍스트를 단 1번 스캔하며 모든 키워드 동시 탐지
- 실패 링크 = 점프 최적화 장치
- 실시간 탐지, 악성 URL 필터링, 보안 로그 분석 등에 이상적

